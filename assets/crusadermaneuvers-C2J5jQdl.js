import{r as h,j as e,c as v}from"./client-BALvyE9I.js";import{c as b}from"./index-BjgfC77z.js";import"./iconBase-ByJiSc4v.js";const k=["Crusader's Strike","Vanguard Strike","Charging Minotaur (Full Round)","Douse the Flames","Leading the Attack"];function w(){const[p,o]=h.useState({withheld:[],granted:[],expended:[],maneuverList:[],known:[],readied:k,grantedCount:2}),{withheld:u,granted:j,expended:m,readied:l,grantedCount:C}=p,f=()=>{o(n=>{const t=Math.floor(Math.random()*n.withheld.length),{granted:r,withheld:i}=n;return{...n,granted:[...r,i[t]],withheld:[...i.slice(0,t),...i.slice(t+1)]}})},s=n=>{o(t=>{const r=n?.grantedCount??t.grantedCount,i=n?.readied??t.readied;let d=[...i],a=[];for(let g=0;g<r&&d.length>0;g++){const c=Math.floor(Math.random()*d.length);a=[...a,d[c]],d=[...d.slice(0,c),...d.slice(c+1)]}return{...t,expended:[],granted:a,withheld:d,readied:i,grantedCount:r}})};h.useEffect(()=>{s()},[]);const x={backgroundColor:"transparent",backgroundRepeat:"no-repeat",border:"none",cursor:"pointer",overflow:"hidden",outline:"none"};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto auto"},children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Withheld"}),e.jsx("ul",{children:u.map((n,t)=>e.jsx("li",{children:n},t))})]}),e.jsxs("div",{children:[e.jsx("h2",{children:"Granted"}),e.jsx("ul",{children:j.map((n,t)=>e.jsxs("li",{children:[n," ",e.jsx("button",{onClick:()=>{o(r=>{const{granted:i,expended:d}=r;return{...r,granted:[...i.slice(0,t),...i.slice(t+1)],expended:[...d,n]}})},children:"Use"})]},t))})]}),e.jsxs("div",{children:[e.jsx("h2",{children:"Expended"}),m.map((n,t)=>e.jsxs("li",{children:[n," ",e.jsx("button",{onClick:()=>{o(r=>{const{granted:i,expended:d}=r;return{...r,expended:[...d.slice(0,t),...d.slice(t+1)],granted:[...i,n]}})},children:e.jsx(b,{})})]},t))]})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>{u.length===0?s():f()},children:"Next Turn"})}),e.jsx("div",{children:e.jsx("button",{onClick:()=>s(),children:"Refresh"})}),e.jsxs("div",{children:[e.jsx("label",{style:{marginRight:5},children:"Initial granted manuevers:"}),e.jsx("input",{type:"number",value:C,onChange:n=>{s({grantedCount:+n.target.value})}})]}),e.jsxs("div",{children:[e.jsx("h2",{children:"Readied"}),l.map((n,t)=>e.jsxs("div",{children:[e.jsx("input",{style:{width:400},value:n,onChange:r=>{s({readied:[...l.slice(0,t),r.target.value,...l.slice(t+1)]})}}),e.jsx("button",{style:x,onClick:()=>{s({readied:[...l.slice(0,t),...l.slice(t+1)]})},children:"➖"})]},t)),e.jsx("button",{style:x,onClick:()=>{s({readied:[...l,""]})},children:"➕"})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("button",{style:{marginLeft:"5px",marginRight:"5px"},onClick:()=>{const n=window.prompt("Paste a JSON object exported with this");if(n!=null){const t=JSON.parse(n);o(t)}},children:"Import"}),e.jsx("button",{style:{marginLeft:"5px",marginRight:"5px"},onClick:()=>{const n=JSON.stringify(p),t=JSON.parse(n);prompt("Copy to clipboard: Ctrl/Command + C",`${JSON.stringify(t)}`)},children:"Export"})]})]})}v.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(w,{})}));
