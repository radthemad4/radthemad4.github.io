import{r as h,j as e,c as v}from"./client-Cj3JHVK6.js";import{c as b}from"./index-GHuwtt4y.js";const k=["Crusader's Strike","Vanguard Strike","Charging Minotaur (Full Round)","Douse the Flames","Leading the Attack"];function w(){const[u,o]=h.useState({withheld:[],granted:[],expended:[],maneuverList:[],known:[],readied:k,grantedCount:2}),{withheld:p,granted:j,expended:m,readied:s,grantedCount:C}=u,f=()=>{o(t=>{const n=Math.floor(Math.random()*t.withheld.length),{granted:r,withheld:i}=t;return{...t,granted:[...r,i[n]],withheld:[...i.slice(0,n),...i.slice(n+1)]}})},l=t=>{o(n=>{const r=(t==null?void 0:t.grantedCount)??n.grantedCount,i=(t==null?void 0:t.readied)??n.readied;let d=[...i],a=[];for(let g=0;g<r&&d.length>0;g++){const c=Math.floor(Math.random()*d.length);a=[...a,d[c]],d=[...d.slice(0,c),...d.slice(c+1)]}return{...n,expended:[],granted:a,withheld:d,readied:i,grantedCount:r}})};h.useEffect(()=>{l()},[]);const x={backgroundColor:"transparent",backgroundRepeat:"no-repeat",border:"none",cursor:"pointer",overflow:"hidden",outline:"none"};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto auto"},children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Withheld"}),e.jsx("ul",{children:p.map((t,n)=>e.jsx("li",{children:t},n))})]}),e.jsxs("div",{children:[e.jsx("h2",{children:"Granted"}),e.jsx("ul",{children:j.map((t,n)=>e.jsxs("li",{children:[t," ",e.jsx("button",{onClick:()=>{o(r=>{const{granted:i,expended:d}=r;return{...r,granted:[...i.slice(0,n),...i.slice(n+1)],expended:[...d,t]}})},children:"Use"})]},n))})]}),e.jsxs("div",{children:[e.jsx("h2",{children:"Expended"}),m.map((t,n)=>e.jsxs("li",{children:[t," ",e.jsx("button",{onClick:()=>{o(r=>{const{granted:i,expended:d}=r;return{...r,expended:[...d.slice(0,n),...d.slice(n+1)],granted:[...i,t]}})},children:e.jsx(b,{})})]},n))]})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>{p.length===0?l():f()},children:"Next Turn"})}),e.jsx("div",{children:e.jsx("button",{onClick:()=>l(),children:"Refresh"})}),e.jsxs("div",{children:[e.jsx("label",{style:{marginRight:5},children:"Initial granted manuevers:"}),e.jsx("input",{type:"number",value:C,onChange:t=>{l({grantedCount:+t.target.value})}})]}),e.jsxs("div",{children:[e.jsx("h2",{children:"Readied"}),s.map((t,n)=>e.jsxs("div",{children:[e.jsx("input",{style:{width:400},value:t,onChange:r=>{l({readied:[...s.slice(0,n),r.target.value,...s.slice(n+1)]})}}),e.jsx("button",{style:x,onClick:()=>{l({readied:[...s.slice(0,n),...s.slice(n+1)]})},children:"➖"})]},n)),e.jsx("button",{style:x,onClick:()=>{l({readied:[...s,""]})},children:"➕"})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("button",{style:{marginLeft:"5px",marginRight:"5px"},onClick:()=>{const t=window.prompt("Paste a JSON object exported with this");if(t!=null){const n=JSON.parse(t);o(n)}},children:"Import"}),e.jsx("button",{style:{marginLeft:"5px",marginRight:"5px"},onClick:()=>{const t=JSON.stringify(u),n=JSON.parse(t);prompt("Copy to clipboard: Ctrl/Command + C",`${JSON.stringify(n)}`)},children:"Export"})]})]})}v.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(w,{})}));
